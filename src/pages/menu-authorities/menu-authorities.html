<!--
  Generated template for the MenuAuthoritiesPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
      <button ion-button menuToggle>
          <ion-icon name="menu"></ion-icon>
      </button>
    <ion-title>จัดการสิทธิ์การใช้งานเมนู</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>


<p-panel header="จัดการสิทธิ์การใช้งานเมนู" [toggleable]="true">
    <div class="ui-g">
        <div class="ui-g-6">
                <div class="ui-g ui-fluid">
                    <form [formGroup]="MenuAuthoritiesform" >
                              <div class="ui-grid-col-7">
                                <app-auto-complete-dropdown  (click)="SelectDropdown()"   #autoCompleteDropdownPosition ></app-auto-complete-dropdown>
                                <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!MenuAuthoritiesform.controls['authorities'].valid&&MenuAuthoritiesform.controls['authorities'].dirty">
                                  <i class="fa fa-close"></i> Authorities
                                </div>
                              </div>           
                    </form>
                </div>
                <br>
                <!-- (click)="SelectDropdown()" -->
                <!-- selectionMode="checkbox"  -->
                <p-tree 
                        [value]="selectedFile"           
                        [propagateSelectionUp]="true"
                        [propagateSelectionDown]="true" 
                >
                      <ng-template let-node  pTemplate="default">
                        <p-checkbox [(ngModel)]="node.partialSelected"  label="{{node.label}}" (click)="SelectNode(node)" binary="true"  ></p-checkbox>
                        <!-- <input [(ngModel)]="node.partialSelected" type="checkbox" > --> 
                        <span *ngIf="node.partialSelected&&node.children.length==0" class="fa fa-cog" (click)="ControlMenu(node)"></span>
                      </ng-template> 
                </p-tree>
                
        </div>
        <div class="ui-g-6" *ngIf="operetion">
           
               
                <p-fieldset legend="กำหนดสิทธิ์การใช้งานของเมนู :{{nodeMenuController.label}}">
                        <div class="ui-g-12" *ngFor="let Code of  tableCode">
                                <p-checkbox 
                                    name="{{Code.data.code}}"    
                                    label="{{Code.data.description}}" 
                                    binary="true" 
                                    [(ngModel)]="Code.status"
                                    (onChange)="AddOptionMenu(Code)">
        
                                </p-checkbox>
                       </div>   
                </p-fieldset>
                 
        </div>
    </div>  
    
 
  
</p-panel>
<p-growl [(value)]="msgs" styleClass="registerGrowl" life="3000"></p-growl>


</ion-content>
